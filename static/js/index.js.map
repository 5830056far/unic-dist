{"version":3,"sources":["webpack:///./src/assets/js/assets.com.js","webpack:///./src/pages/index/index.js"],"names":["list","_list","arrayCopy","sort","item1","item2","num_alert","xList","data1","data2","forEach","item","index","push","district_name","src","script","$","onreadystatechange","alert","onload","console","log","onerror","html","arr","_arr","Common","getVal","obj","str","noStr","replace","split","res","_isObj","length","first","shift","myPromise","jsonUrl","dataUrl","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","a","reosolve","reject","ajaxIndex","json","data","handleData","ajax","url","type","success","response","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default","JSON","parse","error","err","__WEBPACK_IMPORTED_MODULE_2__index_less__","__webpack_require__","timerI","n","dataArr","jsonData","jsonData2","jsonData3","jsonData4","jsonData5","updateDate","option","village","street","commA","commB","commC","sum","virePerc","selector","b","eq","park_mgr","motor_vehicle","num_alert_today","num_alert_month","css","Math","round","addCdata","fire_protection_security","perc","parseFloat","c","myChart","tooltip","trigger","formatter","series","name","radius","avoidLabelOverlap","roseType","startAngle","label","normal","show","textStyle","fontSize","fontWeight","color","emphasis","labelLine","field","map","value","itemStyle","x","y","x2","y2","colorStops","offset","globalCoord","runColor","alert_type","echarts","getInstanceByDom","document","querySelector","init","setOption","foodPie","alert_percent","foodData","food_safety","village_street_safety","village_safety","street_safety","num_tendency_month","title","text","left","axisPointer","crossStyle","xAxis","len","i","month","xZhou","axisLabel","yAxis","nameTextStyle","axisLine","splitLine","lineStyle","grid","top","bottom","right","barWidth","barGap","water_quality_mgr","water_quality_good","water_quality_nomal","water_quality_bad","max","find","shaft_mgr","green_service","non_motorized_vehicle","market_monitor","num_normal","aged_service","environmental_protection_service","realtime_data","num_data_records","toString","reverse","spl","test","join","num_equipemnt","cycle3DRotate","nowI","each","ele","transform","attr","startX","moveX","isDown","bindClick","name2","_name2","click","event","location","href","substring","toUpperCase","cursor","boundaryGap","axisTick","width","smooth","areaStyle","cyc2Line","on","ev","preventDefault","pageX","abs","rotateY","ele3DList","__lenth","ele0Rot","setInterval"],"mappings":"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","file":"static/js/index.js","sourcesContent":["\r\n\r\n\r\n// 上线环境不执行\r\nexport function arrayCopy( arr ){\r\n\tvar _arr = [];\r\n\tarr.forEach(function (item, index) {\r\n\t\t_arr.push( item );\r\n\t})\r\n\treturn _arr;\r\n}\r\n\r\nexport function getPerc(arr){\r\n  var _arr = arrayCopy(arr);\r\n  _arr.sort(function (val1, val2) {\r\n  \treturn val2 - val1;\r\n  });\r\n  // console.log( _arr[0] );\r\n  return arr.map(function(elem, index) {\r\n  \treturn Math.round(elem/_arr[0]*100);\r\n  })\r\n}\r\n\r\nexport function formatChartList( list ){\r\n  var _list = arrayCopy( list );\r\n  _list.sort( function(item1, item2) {\r\n    return item2.num_alert - item1.num_alert\r\n  });\r\n  var xList = [];\r\n  var data1 = [];\r\n  var data2 = [];\r\n  _list.forEach( function(item, index) {\r\n    xList.push( item.district_name );\r\n    data1.push( item.num_alert );\r\n    data2.push( _list[0].num_alert );\r\n  });\r\n  return {\r\n    xList,\r\n    data1,\r\n    data2\r\n  }\r\n}\r\n\r\nexport function insertScript(src){\r\n  var script = $( '<script data-type=static src=\"'+src+'\"><\\/script>' );\r\n  script[0].onreadystatechange = function () {\r\n    alert(123)\r\n  }\r\n  script[0].onload = function () {\r\n    console.log(111111)\r\n  }\r\n  script[0].onerror = function () {\r\n    console.log(2222)\r\n  }\r\n  $('#myScript').html( script );\r\n}\r\n\r\n/**\r\n * 获取对象的多层键值，获取不到返回''\r\n * @param  {[obj]} obj [获取值的对象]\r\n * @param  {[type]} str [获取的路径字符串]\r\n * @return {[type]}     [description]\r\n */\r\nfunction getVal( obj, str, noStr ){\r\n  if ( !obj ) {\r\n    return noStr || '--';\r\n  }\r\n  var arr = str.replace('[', '.').replace(']', '').split('.');\r\n  var res = noStr || '--';\r\n  _isObj(obj, arr );\r\n  return res;\r\n  // 循环需要遍历的键\r\n  function _isObj(obj, arr ){\r\n    \r\n    if ( !obj[arr[0] ] ) {\r\n      return '';\r\n    }else if( arr.length === 1 ){\r\n      res = obj[arr[0]] ;\r\n      // console.log( res )\r\n    }else{\r\n      var first = arr.shift();\r\n      _isObj(obj[first], arr );\r\n    }\r\n  }\r\n}\r\n\r\nfunction isArrayFn(value){\r\n  if (typeof Array.isArray === \"function\") {\r\n    return Array.isArray(value);\r\n  } else {\r\n    return Object.prototype.toString.call(value) === \"[object Array]\";\r\n  }\r\n}\r\n\r\nfunction myPromise(jsonUrl, dataUrl){\r\n  return new Promise(function (reosolve, reject) {\r\n    let ajaxIndex = 0;\r\n    let json ;\r\n    let data ;\r\n\r\n    $.ajax({\r\n      url: jsonUrl,\r\n      type: 'get',\r\n      success(response){\r\n        if ( typeof response != 'object') {\r\n          json = JSON.parse(response);\r\n        }else{\r\n          json = response;\r\n        }\r\n        \r\n        ajaxIndex++;\r\n        handleData();\r\n      },\r\n      error(err){\r\n        reject(err)\r\n      }\r\n    });\r\n\r\n    $.ajax({\r\n      url: dataUrl,\r\n      type: 'get',\r\n      success(response){\r\n        if ( typeof response != 'object') {\r\n          data = JSON.parse(response);\r\n        }else{\r\n          data = response;\r\n        }\r\n        ajaxIndex++;\r\n        handleData();\r\n      },\r\n      error(err){\r\n        reject(err)\r\n      }\r\n    });\r\n\r\n    function handleData(){\r\n      if ( ajaxIndex === 2 ) {\r\n        reosolve({json, data});\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\nexport const Common = {\r\n  getVal,\r\n  myPromise\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/assets.com.js","// 主页入口js\n\n// 公共\nimport '@/assets/js/assets.com.js'\nimport '@/assets/less/common.less'\n\n// 引入less\nimport './index.less';\n\n\n\n\nvar timer;\nvar timerI = 1;\nvar dataArr = [jsonData,jsonData2, jsonData3, jsonData4, jsonData5];\n\n$(function () {\n  cyc2Line();\n  cycle3DRotate(1);\n  bindCycle3DRotate();\n\n  function bindClick( name, name2 ){\n    var _name2 = name2 || name;\n    $('.'+name ).click(function(event) {\n      location.href = './pages.html#/'+_name2.substring(0,1).toUpperCase()+_name2.substring(1);\n    }).css({\n      cursor: 'pointer'\n    })\n  }\n  bindClick('aged');\n  bindClick('fire');\n  bindClick('toCommunity', 'community');\n  bindClick('food');\n  bindClick('virescence' ,'garbage');\n  bindClick('toStreet' ,'street');\n  bindClick('market');\n  // bindClick('water');\n\n});\n\nupdateDate(dataArr[0]);\ntimer = setInterval(function () {\n  updateDate(dataArr[timerI]);\n  // console.log( timerI );\n  timerI++;\n  timerI%=5;\n}, 12000)\n\n\n\nfunction updateDate( jsonData ){\n  // 消防 fire\n  addCdata('.fire', jsonData.fire_protection_security );\n\n  // 食品 food\n  foodData(jsonData.food_safety);\n  function foodData(data ){\n    addCdata('.food', data );\n\n    var perc = getPerc( data.num_alert_today, data.num_alert_month )\n    // console.log( perc )\n    $( '.food [c-data=bar]').eq(0).css('height', perc[0]+'%');\n    $( '.food [c-data=bar]').eq(1).css('height', perc[1]+'%');\n\n    foodPie(data.alert_percent)\n  }\n\n  // 社区 community\n  communityData( jsonData.village_street_safety )\n  function communityData( data ){\n    var village = data.village_safety.num_alert_today\n    var street = data.street_safety.num_alert_today;\n    $( '.community [c-data=today]').eq(0).html( village );\n    $( '.community [c-data=today]').eq(1).html( street );\n    commuBar(data.village_safety.num_tendency_month, data.street_safety.num_tendency_month);\n  }\n  \n\n  // 水质管理 water\n  // addCdata('.food', jsonData.water_quality_mgr );\n  addCdata('.water', jsonData.water_quality_mgr );\n  ;(function (res) {\n    var commA = jsonData.water_quality_mgr.water_quality_good;\n    var commB = jsonData.water_quality_mgr.water_quality_nomal;\n    var commC = jsonData.water_quality_mgr.water_quality_bad;\n    var sum = Math.max( commA, commB, commC );\n    // console.log( sum )\n    $( '.water [c-data=bar]').eq(0).css('height', Math.round( commA/sum*100, 2 )+'%');\n    $( '.water [c-data=bar]').eq(0).find('span').html( commA );\n    $( '.water [c-data=bar]').eq(1).css('height', Math.round( commB/sum*100, 2 )+'%');\n    $( '.water [c-data=bar]').eq(1).find('span').html( commB );\n    $( '.water [c-data=bar]').eq(2).css('height', Math.round( commC/sum*100, 2 )+'%');\n    $( '.water [c-data=bar]').eq(2).find('span').html( commC );\n  }());\n  \n  // 防汛管理 flood\n  addCdata('.flood', jsonData.shaft_mgr );\n\n  // 绿化服务 virescence\n  virePerc('.virescence', jsonData.green_service.num_alert_today, jsonData.green_service.num_alert_month);\n\n  function virePerc( selector , a, b){\n    var sum;\n    a > b ? sum = a : sum = b;\n    $( selector+ ' [c-data=today]').eq(0).html(jsonData.park_mgr.motor_vehicle.num_alert_today);\n    $( selector+ ' [c-data=month]').eq(0).html(jsonData.park_mgr.motor_vehicle.num_alert_month);\n    $( selector+' [c-data=bar]').eq(0).css('width', Math.round(b/sum*100, 2)+'%');\n    $( selector+' [c-data=bar]').eq(1).css('width', Math.round(a/sum*100, 2)+'%');\n  }\n\n  // 停车管理 park\n  $( '.park [c-data=today]').eq(0).html(jsonData.park_mgr.motor_vehicle.num_alert_today);\n  $( '.park [c-data=month]').eq(0).html(jsonData.park_mgr.motor_vehicle.num_alert_month);\n  $( '.park [c-data=today]').eq(1).html(jsonData.park_mgr.non_motorized_vehicle.num_alert_today);\n  $( '.park [c-data=month]').eq(1).html(jsonData.park_mgr.non_motorized_vehicle.num_alert_month);\n\n  // 市场监管 market\n  virePerc('.market', jsonData.market_monitor.num_alert, jsonData.market_monitor.num_normal);\n\n  // 养老服务 aged\n  addCdata('.aged', jsonData.aged_service );\n\n  // 环保服务 environment\n  addCdata('.environment', jsonData.environmental_protection_service );\n\n  // 中间数据\n  \n  $('.main_c [c-data=records]').html( blockNum(jsonData.realtime_data.num_data_records) );\n  function blockNum( str ){\n    var arr = str.toString().split('').reverse();\n    arr = arr.map(function(item, index) {\n      var res = '';\n      var spl = '';\n      if ( index!=0 && index%3 === 0 ) {\n        spl = '<i>,</i>'\n      }\n      if ( /\\d/.test(item) ) {\n        res = '<i class=\"i_text\">'+item+'</i>'+spl;\n      }\n      return res;\n    }).reverse().join('');\n    return arr;\n  };\n  $('.main_c [c-data=equipemnt]').html(jsonData.realtime_data.num_equipemnt);\n  $('.main_c [c-data=today]').html(jsonData.realtime_data.num_alert_today);\n  $('.main_c [c-data=month]').html(jsonData.realtime_data.num_alert_month);\n}\n\n\n\nfunction addCdata( selector, data ){\n  $( selector +' [c-data=today]').html(data.num_alert_today);\n  $( selector + ' [c-data=month]').html(data.num_alert_month);\n}\n\n\n// commuBar();\n// 社区安全柱状图\nfunction commuBar( data1, data2 ){\n  \n  var xData = xZhou();\n  function xZhou(){\n    var len = 0;\n    var arr = [];\n    data1.length > data2.length ? len = data1 : len = data2;\n    for (var i = 0; i < len.length; i++) {\n      arr.push( len[i].month )\n    }\n    return arr\n  }\n  var option = {\n    \"title\": {\n      \"text\": \"\",\n      \"left\": \"center\",\n      \"y\": \"10\",\n      \"textStyle\": {\n        \"color\": \"#fff\"\n      }\n    },\n    // \"backgroundColor\": \"#1c2e40\",\n    \"color\": \"#384757\",\n    \"tooltip\": {\n      \"trigger\": \"axis\",\n      \"axisPointer\": {\n        \"type\": \"cross\",\n        \"crossStyle\": {\n          \"color\": \"#384757\"\n        }\n      }\n    },\n    \"xAxis\": [{\n      \"type\": \"category\",\n      \"data\": xData,\n      \"axisPointer\": {\n        \"type\": \"shadow\"\n      },\n      \"axisLabel\": {\n        \"show\": true,\n        \"textStyle\": {\n          \"color\": \"#e5e5e5\",\n          \"fontSize\": '20'\n        }\n      }\n    }],\n    \"yAxis\": [{\n      \"type\": \"value\",\n      \"name\": \"\",\n      \"nameTextStyle\": {\n        \"color\": \"#7d838b\"\n      },\n      \"axisLabel\": {\n        \"show\": true,\n        \"textStyle\": {\n          \"color\": \"#e5e5e5\",\n          \"fontSize\": '18'\n        }\n      },\n      \"axisLine\": {\n        \"show\": true\n      },\n      \"splitLine\": {\n        \"lineStyle\": {\n          \"color\": \"#7d838b\"\n        }\n      }\n    }],\n    \"grid\": {\n      \"top\": \"5%\",\n      \"bottom\": \"20%\",\n      \"left\": \"10%\",\n      \"right\": \"10%\"\n    },\n    \"series\": [{\n      \"name\": \"社区安全\",\n      \"type\": \"bar\",\n      \"data\": data1.map(function (item, index) {\n        item.value = item.num_alert\n        return item\n      }),\n      \"barWidth\": \"20%\",\n      \"itemStyle\": {\n        \"normal\": {\n          \"color\": {\n            \"type\": \"linear\",\n            \"x\": 0,\n            \"y\": 0,\n            \"x2\": 0,\n            \"y2\": 1,\n            \"colorStops\": [{\n              \"offset\": 0,\n              \"color\": \"rgba(2,137,243,1)\"\n            }, {\n              \"offset\": 1,\n              \"color\": \"rgba(21,67,150,1)\"\n            }],\n            \"globalCoord\": false\n          }\n        }\n      }\n    }, {\n      \"name\": \"街道安全\",\n      \"type\": \"bar\",\n      \"data\": data2.map(function (item, index) {\n        item.value = item.num_alert\n        return item\n      }),\n      \"barWidth\": \"20%\",\n      \"itemStyle\": {\n        \"normal\": {\n          \"color\": {\n            \"type\": \"linear\",\n            \"x\": 0,\n            \"y\": 0,\n            \"x2\": 0,\n            \"y2\": 1,\n            \"colorStops\": [{\n                \"offset\": 0,\n                \"color\": \"rgba(107,119,255,1)\"\n              },\n\n              {\n                \"offset\": 1,\n                \"color\": \"rgba(61,236,251,1)\"\n              }\n            ],\n            \"globalCoord\": false\n          }\n        }\n      },\n      \"barGap\": \"30%\"\n    }]\n  };\n\n  var myChart ;\n  if ( $('#commu_bar canvas').length > 0 ) {\n    myChart = echarts.getInstanceByDom( document.querySelector(\"#commu_bar\") )\n  }else{\n    myChart = echarts.init( document.querySelector(\"#commu_bar\") );\n  }\n  \n  myChart.setOption( option );\n}\n\n// foodPie();\n// 食品扇形图\nfunction foodPie(data){\n\n  function runColor(index){\n    index = index%4\n    var color = [\n      [ '#15157b', '#7d69d9'], \n      ['#1b338c' , '#4655cf'], \n      [ '#154885', '#3dcd71'], \n      [ '#c0bc54', '#c0bc54']\n    ];\n    \n    return {\n      \"color\": {\n        \"type\": \"linear\",\n        \"x\": 0,\n        \"y\": 0,\n        \"x2\": 0,\n        \"y2\": 1,\n        \"colorStops\": [{\n            \"offset\": 0,\n            \"color\": color[index][0]\n          },\n          {\n            \"offset\": 1,\n            \"color\": color[index][1]\n          }\n        ],\n        \"globalCoord\": false\n      }\n    }\n  };\n\n  var option = {\n    tooltip: {\n      trigger: 'item',\n      formatter: \" <br/>{b}: {c} ({d}%) <br/> \"\n    },\n    series: [\n      {\n        name:'访问来源',\n        type:'pie',\n        radius: ['40%', '80%'],\n        avoidLabelOverlap: true,\n        roseType: 'radius',\n        startAngle: 90,\n        label: {\n          normal: {\n            show: true,\n            textStyle: {\n              fontSize: '18',\n              fontWeight: 'normal',\n              color: '#9bacf3'\n            }\n          },\n          emphasis: {\n            show: true,\n            textStyle: {\n              fontSize: '20',\n              fontWeight: 'bold',\n            }\n          }\n        },\n        labelLine: {\n          normal: {\n            show: true\n          }\n        },\n        data: data.sort(function (a, b) { return b.field - a.field; }).map(function(value, index) {\n          value.itemStyle = runColor(index);\n          value.name = value.alert_type;\n          value.value = value.field;\n          return value;\n        }),\n      }\n    ]\n  };\n  var myChart ;\n  if ( $('#foodPie canvas').length > 0 ) {\n    myChart = echarts.getInstanceByDom( document.querySelector(\"#foodPie\") )\n  }else{\n    myChart = echarts.init( document.querySelector(\"#foodPie\") );\n  }\n\n  myChart.setOption( option );\n}\n\n// marketPie();\nfunction marketPie(data){\n\n  function runColor(index){\n    index = index%4\n    var color = [\n      '#84de52', \n      '#f78343', \n      '#154885', \n      '#c0bc54'\n    ];\n    \n    return {\n      \"color\": color[index]\n    }\n  };\n\n  var option = {\n    tooltip: {\n      trigger: 'item',\n      formatter: \"{b}: {c} ({d}%)\",\n      confine: true,\n    },\n    series: [\n      {\n        name:'市场监管',\n        type:'pie',\n        radius: ['40%', '70%'],\n        avoidLabelOverlap: false,\n        startAngle: 90,\n        label: {\n          normal: {\n            show: true,\n            textStyle: {\n              fontSize: '24',\n              fontWeight: 'normal',\n              color: '#38a7b7'\n            }\n          },\n          emphasis: {\n            show: true,\n            textStyle: {\n              fontSize: '24',\n              fontWeight: 'bold',\n            }\n          }\n        },\n        labelLine: {\n          normal: {\n            show: false,\n            length: 0\n          }\n        },\n        data: [\n          {value: getVal(data, 'num_alert'), name:'告警'},\n          {value: getVal(data, 'num_normal'), name:'正常'},\n        ].sort(function (a, b) { return b.value - a.value; }).map(function(value, index) {\n          value.itemStyle = runColor(index);\n          return value;\n        }),\n      }\n    ]\n  };\n\n  var myChart ;\n  if ( $('#marketPie canvas').length > 0 ) {\n    myChart = echarts.getInstanceByDom( document.querySelector(\"#marketPie\") )\n  }else{\n    myChart = echarts.init( document.querySelector(\"#marketPie\") );\n  }\n  myChart.setOption( option );\n}\n\n// 中间循环球2线图\nfunction cyc2Line(){\n  var option = {\n      tooltip:{\n        formatter: '{b} : {c}'\n      },\n      grid: {\n        left: '10%',\n        right: '10%',\n        top: '5%',\n        bottom: '20%' \n      },\n      xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: ['1', '2', '3', '4', '5', '6', '7'],\n         \n          axisLine: {\n              show: false\n          },\n          axisTick:{\n              show: false\n          },\n          axisLabel:{\n               color: '#ccc',\n               fontSize: 16\n          },\n          splitLine:{\n              show: true,\n              lineStyle: {\n                color: '#666',\n                type: 'dotted',\n                width: 2\n              }\n          },\n          axisPointer: {\n            show: false,\n            type: 'line',\n          }\n      },\n      yAxis: {\n          type: 'value',\n          show: false,\n          splitLine:{\n              show: false\n          },\n          axisTick:{\n              show: false\n          },\n          axisLine: {\n              show: false\n          },\n          axisLabel:{\n               color: '#ccc',\n          },\n          axisPointer: {\n            show: false,\n            type: 'line',\n          }\n      },\n      series: [{\n          data: [820, 932, 901, 934, 1290, 1330, 1320, 123],\n          type: 'line',\n          smooth: true,\n          lineStyle: {\n            width: 8,\n            color:{\n                 type: 'linear',\n                  x: 0,\n                  y: 0,\n                  x2: 1,\n                  y2: 0,\n                  colorStops: [{\n                      offset: 0, color: '#fec273' // 0% 处的颜色\n                  }, {\n                      offset: 0.4, color: '#f68772' // 0% 处的颜色\n                  },{\n                      offset: 1, color: '#71deec' // 100% 处的颜色\n                  }],\n                  globalCoord: false // 缺省为 false\n            }\n          },\n          areaStyle: {\n              color: 'rgba(255, 255, 255, 0.2)'\n          }\n      }]\n  };\n  var myChart ;\n  if ( $('#cyc2Line canvas').length > 0 ) {\n    myChart = echarts.getInstanceByDom( document.querySelector(\"#cyc2Line\") )\n  }else{\n    myChart = echarts.init( document.querySelector(\"#cyc2Line\") );\n  }\n  myChart.setOption( option );\n}\n\n\nfunction cycle3DRotate( nowI ){\n  $('.cycle_3d_item').each(function (index, ele) {\n    // console.log( index, ele )\n    // console.log( $(ele).css('transform') )\n    $(ele).css({\n      transform: 'rotateY('+ (60*(index-nowI) ) +'deg) translateZ(580px)'\n    }).attr('data-rotateY', 60*(index-nowI) )\n  });\n}\n\nfunction bindCycle3DRotate(){\n  var startX,\n    moveX,\n    isDown = false;\n\n  $('#cycle_3d').on('mousedown', function (ev) {\n    ev.preventDefault();\n    startX = ev.pageX;\n    isDown = true;\n  }).on('mousemove', function(ev) {\n    ev.preventDefault();\n    // 是否已按下鼠标\n    if ( isDown ) {\n      \n      moveX = ev.pageX - startX;\n      if ( Math.abs(moveX) > 2 ) {\n        moveX = moveX/2;\n        startX = ev.pageX;\n      }else{\n        return;\n      }\n      // console.log(moveX)\n\n      $('.cycle_3d_item').each(function (index, ele) {\n        // console.log( index, ele )\n        var rotateY = $(ele).attr('data-rotateY');\n        // console.log( $(ele).css('transform') )\n        $(ele).css({\n          transform: 'rotateY('+ (+rotateY+ moveX/4) +'deg) translateZ(580px)'\n        }).attr('data-rotateY', (+rotateY + moveX/4) )\n      });\n    }\n  });\n  $(document).on('mouseup', function(ev) {\n    ev.preventDefault();\n    // console.log(3);\n    isDown = false;\n\n    var ele3DList = $('.cycle_3d_item') ;\n    var __lenth = ele3DList.length;\n    var nowI ;\n    var ele0Rot = ele3DList.eq(0).attr('data-rotateY');\n    \n    if ( ele0Rot > 0 ) {\n      nowI = 0;\n    }else if ( ele0Rot < -(__lenth-1)*60 ) {\n      nowI = __lenth-1;\n    } else {\n      nowI = Math.round( Math.abs( ele0Rot/60 ) );\n    }\n    cycle3DRotate( nowI );\n  });\n}\n\n/**\n * 获取对象的多层键值，获取不到返回''\n * @param  {[obj]} obj [获取值的对象]\n * @param  {[type]} str [获取的路径字符串]\n * @return {[type]}     [description]\n */\nfunction getVal( obj, str, noStr ){\n  if ( !obj ) {\n    return noStr || '--';\n  }\n  var arr = str.replace('[', '.').replace(']', '').split('.');\n  var res = noStr || '--';\n  _isObj(obj, arr );\n  return res;\n  // 循环需要遍历的键\n  function _isObj(obj, arr ){\n    \n    if ( !obj[arr[0] ] ) {\n      return '';\n    }else if( arr.length === 1 ){\n      res = obj[arr[0]] ;\n      // console.log( res )\n    }else{\n      var first = arr.shift();\n      _isObj(obj[first], arr );\n    }\n  }\n}\n\n\nfunction getPerc(a, b){\n  a = parseFloat(a);\n  b = parseFloat(b);\n  var c ;\n  a > b ? c=a : c= b;\n  return [  Math.round(a/c*100),  Math.round(b/c*100) ];\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/index/index.js"],"sourceRoot":""}