"use strict";!function(win,doc){function dlbsdk(){this.geturl=function(){return location.href+"&appid="+this._param['appid']};this._ispost_success=false;this._param={};this._win=null;this._win_post=null}var _defulturl="";var _success=null;var _error=null;var _posturl=null;var _eventname="onload";dlbsdk.prototype.setInterval=function(){var _this=this;var time=setInterval(function(){if(_this._ispost_success){clearInterval(time)}else{_this.post({data:_this.geturl()})}},4000)};dlbsdk.prototype.config=function(param){param=Object.assign({},{debug:true,appid:"88888888",style:"\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            left: 0px;\n            top: 0px;\n            border: none;\n            margin: 0px;\n            padding: 0px;",success:function success(data){},error:function error(data){}},param);this._defulturl="http://www.dlbdata.cn:8088/three-demo/liantong/index.html";var iframe=document.createElement("iframe");iframe.src=this._defulturl;iframe.id="dlb_iframe";iframe.ref="iframe";iframe.style=param.style;window.name="dlburl:"+location.href;param.success(iframe);this.addEventListener(window);this.setInterval();this._param=param};dlbsdk.prototype.post=function(data){var datas=Object.assign({},{data:data.data,eventtype:data.eventtype,eventname:this._eventname},data);this._win.postMessage(JSON.stringify(datas),this._defulturl)},dlbsdk.prototype.addEventListener=function(win){var _this=this;this._win=document.getElementById("dlb_iframe").contentWindow;this._win_post=win;this._win_post.addEventListener('message',function(e){if(e.data){var data=JSON.parse(e.data);_this._eventname=data.eventname;_this._posturl=data.href;_this._ispost_success=true;if(data['eventname']){eval(data.eventname+"(data.event_data)")}}},false)};win.dlbsdk=new dlbsdk()}(window,document);